import React from 'react';
import { Navigate, Route, Routes } from 'react-router-dom';
import Homepage from './Home/Homepage';
import Signup from './components/Signup';
import Login from './components/Login';
import Navbar from './components/Navbar'; // Assuming you have these
import Footer from './components/Footer'; // Assuming you have these
import { Toaster } from 'react-hot-toast';

// Import the new Activity Tracker pages
import ActivityTracker from './pages/ActivityTracker'; 
import ActivityForm from './pages/ActivityForm'; 

import { useAuth } from './context/AuthProvider'; // Assuming this provides authUser

// Protected Route Component
const ProtectedRoute = ({ children }) => {
  const [authUser] = useAuth();
  return authUser ? children : <Navigate to="/signup" replace />;
};

const App = () => {
  return (
    <div className="dark:bg-slate-900 dark:text-white min-h-screen flex flex-col">
      <Navbar />
      <main className="flex-grow">
        <Routes>
          <Route path="/" element={<Homepage />} />
          <Route path="/signup" element={<Signup />} />
          <Route path="/login" element={<Login />} />

          {/* Protected Routes for Activity Tracker */}
          <Route
            path="/activities"
            element={
              <ProtectedRoute>
                <ActivityTracker />
              </ProtectedRoute>
            }
          />
          <Route
            path="/activities/new"
            element={
              <ProtectedRoute>
                <ActivityForm />
              </ProtectedRoute>
            }
          />

          {/* Add other protected routes here */}

        </Routes>
      </main>
      <Footer />
      <Toaster />
    </div>
  );
};

export default App;

